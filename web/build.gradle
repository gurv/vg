import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage

clean.doLast {
  exec {
    commandLine "cmd", "/c", "npm", "run", "dist-clean"
  }
}

build.doLast {
  exec {
    commandLine "cmd", "/c", "npm", "run", "prod-build"
  }
}

task buildImage(type: DockerBuildImage) {
  dependsOn build
  dockerFile file("$projectDir/Dockerfile")
  inputDir = file("$projectDir")
  tag = 'vg/web:latest'
}
